{"ast":null,"code":"var _jsxFileName = \"/Users/lalit/Documents/BlockChain Development/blockchainEcommerce/client/src/components/App.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\nimport { ethers } from \"ethers\";\nimport Ecommerce from \"../abis/Ecommerce.json\";\nimport Navbar from \"./Navbar/Navbar\";\nimport Products from \"./Products/Products\";\nimport \"./App.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction App() {\n  _s();\n\n  const [account, setAccount] = useState();\n  const [productCount, setProductCount] = useState(0);\n  const [products, setProducts] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [ecommerce, setEcommerce] = useState();\n  const [balance, setBalance] = useState();\n  const [refresh, setRefresh] = useState(false);\n\n  const toggleRefresh = () => setRefresh(!refresh);\n\n  const loadBlockChainData = async () => {\n    if (window.ethereum) {\n      const accounts = await window.ethereum.request({\n        method: \"eth_requestAccounts\"\n      });\n      setAccount(accounts[0]);\n      const networkId = await window.ethereum.request({\n        method: \"net_version\"\n      });\n      let balance = await window.ethereum.request({\n        method: \"eth_getBalance\",\n        params: [accounts[0], \"latest\"]\n      });\n      balance = ethers.utils.formatEther(balance);\n      setBalance(balance);\n      const provider = new ethers.providers.Web3Provider(window.ethereum);\n      const signer = provider.getSigner();\n      const networkData = Ecommerce.networks[networkId];\n\n      if (networkData) {\n        await loadContract(signer, networkData);\n      } else {\n        window.alert(\"Ecommerce contract not deployed to detected network\");\n      }\n    } else {\n      window.alert(\"Non-Ethereum browser detected. You should consider trying MetaMask!\");\n    }\n  };\n\n  const loadContract = async (signer, networkData) => {\n    setLoading(true);\n    const contract = new ethers.Contract(networkData.address, Ecommerce.abi, signer);\n    let temp = await contract.functions.productCount();\n    temp = temp.toString();\n    setProductCount(temp);\n    setEcommerce(contract);\n    setLoading(false);\n  };\n\n  const loadProducts = async () => {\n    console.log(productCount);\n\n    for (var i = 1; i <= productCount; i++) {\n      const product = await (ecommerce === null || ecommerce === void 0 ? void 0 : ecommerce.functions.products(i));\n      setProducts(products => [...products, product]);\n    }\n  };\n\n  useEffect(() => {\n    loadBlockChainData();\n  }, [refresh]);\n  useEffect(() => {\n    loadProducts();\n  }, [productCount, refresh, account]); // console.log(products);\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(Navbar, {\n      loading: loading,\n      account: account,\n      ecommerce: ecommerce,\n      setLoading: setLoading,\n      productCount: productCount,\n      toggleRefresh: toggleRefresh\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 4\n    }, this), loading && /*#__PURE__*/_jsxDEV(\"div\", {\n      children: \"Loading....\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 16\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [\"Balance : \", balance]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [\"Product Count : \", productCount]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(Products, {\n      loading: loading,\n      products: products,\n      account: account,\n      ecommerce: ecommerce,\n      setLoading: setLoading\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 4\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 80,\n    columnNumber: 3\n  }, this);\n}\n\n_s(App, \"Kf/wXnKXGzawrRcuVaJkdmkNRQo=\");\n\n_c = App;\nexport default App;\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useState","useEffect","ethers","Ecommerce","Navbar","Products","App","account","setAccount","productCount","setProductCount","products","setProducts","loading","setLoading","ecommerce","setEcommerce","balance","setBalance","refresh","setRefresh","toggleRefresh","loadBlockChainData","window","ethereum","accounts","request","method","networkId","params","utils","formatEther","provider","providers","Web3Provider","signer","getSigner","networkData","networks","loadContract","alert","contract","Contract","address","abi","temp","functions","toString","loadProducts","console","log","i","product"],"sources":["/Users/lalit/Documents/BlockChain Development/blockchainEcommerce/client/src/components/App.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { ethers } from \"ethers\";\nimport Ecommerce from \"../abis/Ecommerce.json\";\nimport Navbar from \"./Navbar/Navbar\";\nimport Products from \"./Products/Products\";\nimport \"./App.css\";\nfunction App() {\n\tconst [account, setAccount] = useState();\n\tconst [productCount, setProductCount] = useState(0);\n\tconst [products, setProducts] = useState([]);\n\tconst [loading, setLoading] = useState(true);\n\tconst [ecommerce, setEcommerce] = useState();\n\tconst [balance, setBalance] = useState();\n\tconst [refresh, setRefresh] = useState(false);\n\tconst toggleRefresh = () => setRefresh(!refresh);\n\tconst loadBlockChainData = async () => {\n\t\tif (window.ethereum) {\n\t\t\tconst accounts = await window.ethereum.request({\n\t\t\t\tmethod: \"eth_requestAccounts\",\n\t\t\t});\n\t\t\tsetAccount(accounts[0]);\n\t\t\tconst networkId = await window.ethereum.request({\n\t\t\t\tmethod: \"net_version\",\n\t\t\t});\n\t\t\tlet balance = await window.ethereum.request({\n\t\t\t\tmethod: \"eth_getBalance\",\n\t\t\t\tparams: [accounts[0], \"latest\"],\n\t\t\t});\n\t\t\tbalance = ethers.utils.formatEther(balance);\n\t\t\tsetBalance(balance);\n\n\t\t\tconst provider = new ethers.providers.Web3Provider(window.ethereum);\n\t\t\tconst signer = provider.getSigner();\n\t\t\tconst networkData = Ecommerce.networks[networkId];\n\t\t\tif (networkData) {\n\t\t\t\tawait loadContract(signer, networkData);\n\t\t\t} else {\n\t\t\t\twindow.alert(\"Ecommerce contract not deployed to detected network\");\n\t\t\t}\n\t\t} else {\n\t\t\twindow.alert(\n\t\t\t\t\"Non-Ethereum browser detected. You should consider trying MetaMask!\"\n\t\t\t);\n\t\t}\n\t};\n\n\tconst loadContract = async (signer, networkData) => {\n\t\tsetLoading(true);\n\t\tconst contract = new ethers.Contract(\n\t\t\tnetworkData.address,\n\t\t\tEcommerce.abi,\n\t\t\tsigner\n\t\t);\n\t\tlet temp = await contract.functions.productCount();\n\t\ttemp = temp.toString();\n\t\tsetProductCount(temp);\n\t\tsetEcommerce(contract);\n\t\tsetLoading(false);\n\t};\n\n\tconst loadProducts = async () => {\n\t\tconsole.log(productCount);\n\t\tfor (var i = 1; i <= productCount; i++) {\n\t\t\tconst product = await ecommerce?.functions.products(i);\n\t\t\tsetProducts((products) => [...products, product]);\n\t\t}\n\t};\n\n\tuseEffect(() => {\n\t\tloadBlockChainData();\n\t}, [refresh]);\n\n\tuseEffect(() => {\n\t\tloadProducts();\n\t}, [productCount, refresh, account]);\n\n\t// console.log(products);\n\n\treturn (\n\t\t<div>\n\t\t\t<Navbar\n\t\t\t\tloading={loading}\n\t\t\t\taccount={account}\n\t\t\t\tecommerce={ecommerce}\n\t\t\t\tsetLoading={setLoading}\n\t\t\t\tproductCount={productCount}\n\t\t\t\ttoggleRefresh={toggleRefresh}\n\t\t\t/>\n\t\t\t{loading && <div>Loading....</div>}\n\t\t\t<div>Balance : {balance}</div>\n\t\t\t<div>Product Count : {productCount}</div>\n\t\t\t<Products\n\t\t\t\tloading={loading}\n\t\t\t\tproducts={products}\n\t\t\t\taccount={account}\n\t\t\t\tecommerce={ecommerce}\n\t\t\t\tsetLoading={setLoading}\n\t\t\t/>\n\t\t</div>\n\t);\n}\n\nexport default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}