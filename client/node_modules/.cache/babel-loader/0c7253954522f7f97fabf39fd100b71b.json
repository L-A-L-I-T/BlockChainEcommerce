{"ast":null,"code":"var _jsxFileName = \"/Users/lalit/Documents/BlockChain Development/blockchainEcommerce/client/src/components/App.js\",\n    _s = $RefreshSig$();\n\nimport React from \"react\";\nimport { BrowserRouter, Routes, Route } from \"react-router-dom\";\nimport Home from \"../components/Home/Home\";\nimport MyProducts from \"../components/MyProducts/MyProducts\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction App() {\n  _s();\n\n  const [account, setAccount] = useState();\n  const [productCount, setProductCount] = useState(0);\n  const [products, setProducts] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [ecommerce, setEcommerce] = useState();\n  const [balance, setBalance] = useState();\n  const [refresh, setRefresh] = useState(false);\n\n  const toggleRefresh = () => setRefresh(!refresh);\n\n  const [toastShow, setToastShow] = useState(false);\n\n  const handleToastShowOpen = () => setToastShow(true);\n\n  const handleToastShowClose = () => {\n    setToastShow(false);\n    toggleRefresh();\n  };\n\n  const loadBlockChainData = async () => {\n    setProducts([]);\n\n    if (window.ethereum) {\n      const accounts = await window.ethereum.request({\n        method: \"eth_requestAccounts\"\n      });\n      setAccount(accounts[0]);\n      const networkId = await window.ethereum.request({\n        method: \"net_version\"\n      });\n      let balance = await window.ethereum.request({\n        method: \"eth_getBalance\",\n        params: [accounts[0], \"latest\"]\n      });\n      balance = ethers.utils.formatEther(balance);\n      setBalance(balance);\n      const provider = new ethers.providers.Web3Provider(window.ethereum);\n      const signer = provider.getSigner();\n      const networkData = Ecommerce.networks[networkId];\n\n      if (networkData) {\n        await loadContract(signer, networkData);\n      } else {\n        window.alert(\"Ecommerce contract not deployed to detected network\");\n      }\n    } else {\n      window.alert(\"Non-Ethereum browser detected. You should consider trying MetaMask!\");\n    }\n  };\n\n  const loadContract = async (signer, networkData) => {\n    setLoading(true);\n    const contract = new ethers.Contract(networkData.address, Ecommerce.abi, signer);\n    let temp = await contract.functions.productCount();\n    temp = temp.toString();\n    setProductCount(temp);\n    setEcommerce(contract);\n    setLoading(false);\n  };\n\n  const loadProducts = async () => {\n    console.log(productCount);\n\n    for (var i = 1; i <= productCount; i++) {\n      const product = await (ecommerce === null || ecommerce === void 0 ? void 0 : ecommerce.functions.products(i));\n      setProducts(products => [...products, product]);\n    }\n  };\n\n  useEffect(() => {\n    loadBlockChainData();\n  }, [refresh]);\n  useEffect(() => {\n    setProducts([]);\n    loadProducts();\n  }, [productCount]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(BrowserRouter, {\n      children: /*#__PURE__*/_jsxDEV(Routes, {\n        children: [/*#__PURE__*/_jsxDEV(Route, {\n          path: \"/\",\n          element: /*#__PURE__*/_jsxDEV(Home, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 87,\n            columnNumber: 31\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(Route, {\n          exact: true,\n          path: \"/myproducts\",\n          element: /*#__PURE__*/_jsxDEV(MyProducts, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 88,\n            columnNumber: 47\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 6\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 5\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 4\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 84,\n    columnNumber: 3\n  }, this);\n}\n\n_s(App, \"xbeTUoNDPwczv3M1AuNa7Csgkms=\");\n\n_c = App;\nexport default App;\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","BrowserRouter","Routes","Route","Home","MyProducts","App","account","setAccount","useState","productCount","setProductCount","products","setProducts","loading","setLoading","ecommerce","setEcommerce","balance","setBalance","refresh","setRefresh","toggleRefresh","toastShow","setToastShow","handleToastShowOpen","handleToastShowClose","loadBlockChainData","window","ethereum","accounts","request","method","networkId","params","ethers","utils","formatEther","provider","providers","Web3Provider","signer","getSigner","networkData","Ecommerce","networks","loadContract","alert","contract","Contract","address","abi","temp","functions","toString","loadProducts","console","log","i","product","useEffect"],"sources":["/Users/lalit/Documents/BlockChain Development/blockchainEcommerce/client/src/components/App.js"],"sourcesContent":["import React from \"react\";\n\nimport { BrowserRouter, Routes, Route } from \"react-router-dom\";\nimport Home from \"../components/Home/Home\";\nimport MyProducts from \"../components/MyProducts/MyProducts\";\nfunction App() {\n\tconst [account, setAccount] = useState();\n\tconst [productCount, setProductCount] = useState(0);\n\tconst [products, setProducts] = useState([]);\n\tconst [loading, setLoading] = useState(true);\n\tconst [ecommerce, setEcommerce] = useState();\n\tconst [balance, setBalance] = useState();\n\tconst [refresh, setRefresh] = useState(false);\n\tconst toggleRefresh = () => setRefresh(!refresh);\n\tconst [toastShow, setToastShow] = useState(false);\n\tconst handleToastShowOpen = () => setToastShow(true);\n\tconst handleToastShowClose = () => {\n\t\tsetToastShow(false);\n\t\ttoggleRefresh();\n\t};\n\tconst loadBlockChainData = async () => {\n\t\tsetProducts([]);\n\t\tif (window.ethereum) {\n\t\t\tconst accounts = await window.ethereum.request({\n\t\t\t\tmethod: \"eth_requestAccounts\",\n\t\t\t});\n\t\t\tsetAccount(accounts[0]);\n\t\t\tconst networkId = await window.ethereum.request({\n\t\t\t\tmethod: \"net_version\",\n\t\t\t});\n\t\t\tlet balance = await window.ethereum.request({\n\t\t\t\tmethod: \"eth_getBalance\",\n\t\t\t\tparams: [accounts[0], \"latest\"],\n\t\t\t});\n\t\t\tbalance = ethers.utils.formatEther(balance);\n\t\t\tsetBalance(balance);\n\n\t\t\tconst provider = new ethers.providers.Web3Provider(window.ethereum);\n\t\t\tconst signer = provider.getSigner();\n\t\t\tconst networkData = Ecommerce.networks[networkId];\n\t\t\tif (networkData) {\n\t\t\t\tawait loadContract(signer, networkData);\n\t\t\t} else {\n\t\t\t\twindow.alert(\"Ecommerce contract not deployed to detected network\");\n\t\t\t}\n\t\t} else {\n\t\t\twindow.alert(\n\t\t\t\t\"Non-Ethereum browser detected. You should consider trying MetaMask!\"\n\t\t\t);\n\t\t}\n\t};\n\n\tconst loadContract = async (signer, networkData) => {\n\t\tsetLoading(true);\n\t\tconst contract = new ethers.Contract(\n\t\t\tnetworkData.address,\n\t\t\tEcommerce.abi,\n\t\t\tsigner\n\t\t);\n\t\tlet temp = await contract.functions.productCount();\n\t\ttemp = temp.toString();\n\t\tsetProductCount(temp);\n\t\tsetEcommerce(contract);\n\t\tsetLoading(false);\n\t};\n\n\tconst loadProducts = async () => {\n\t\tconsole.log(productCount);\n\t\tfor (var i = 1; i <= productCount; i++) {\n\t\t\tconst product = await ecommerce?.functions.products(i);\n\t\t\tsetProducts((products) => [...products, product]);\n\t\t}\n\t};\n\n\tuseEffect(() => {\n\t\tloadBlockChainData();\n\t}, [refresh]);\n\tuseEffect(() => {\n\t\tsetProducts([]);\n\t\tloadProducts();\n\t}, [productCount]);\n\n\treturn (\n\t\t<div>\n\t\t\t<BrowserRouter>\n\t\t\t\t<Routes>\n\t\t\t\t\t<Route path=\"/\" element={<Home />} />\n\t\t\t\t\t<Route exact path=\"/myproducts\" element={<MyProducts />} />\n\t\t\t\t</Routes>\n\t\t\t</BrowserRouter>\n\t\t</div>\n\t);\n}\n\nexport default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}